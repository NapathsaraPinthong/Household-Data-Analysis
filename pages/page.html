<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Node Embeddings Plots</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        h1 {
            text-align: center;
        }
        /* Scrollable container */
        .scroll-container {
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            margin: 0 auto;
            width: 100vw; /* Ensure the container fits the viewport width */
        }
        /* Individual plot containers */
        .plot-container {
            flex: 0 0 100vw; /* Each plot takes up 100% of the viewport width */
            display: flex;
            justify-content: center; /* Centers the content horizontally */
            align-items: center; /* Centers the content vertically */
        }
        /* Scroll buttons */
        .scroll-button {
            background-color: #007BFF;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
        }
        #scroll-left {
            left: 50px;
        }
        #scroll-right {
            right: 50px;
        }
        #node-details {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Experiment on Clustering Methods on TSNE Visualization of 'Household' Node Embeddings</h1>
    <div id="carousel-container" style="position: relative;">
        <!-- Scroll buttons -->
        <button id="scroll-left" class="scroll-button">←</button>
        <button id="scroll-right" class="scroll-button">→</button>

        <!-- Scrollable container for plots -->
        <div class="scroll-container" id="plots-carousel">
            <div class="plot-container" id="dbscan-plot"></div>
            <div class="plot-container" id="kmeans-plot"></div>
            <div class="plot-container" id="gmm-plot"></div>
            <div class="plot-container" id="hierarchical-plot"></div>
        </div>
    </div>

    <!-- Container to display node details -->
    <div id="node-details">
        <h3>Click to see the Household Node Details</h3>
        <p id="details"></p>
    </div>

    <script>
        var plotDivs = {};
        var plotData = {}; // Store plot data to reference later

        // Function to render a Plotly plot and add click event listener
        function renderPlot(plotId, jsonFile) {
            $.getJSON(jsonFile, function(data) {
                plotData[plotId] = data; // Store plot data

                // Render the plot
                Plotly.newPlot(plotId, data.data, data.layout);

                // Store plotDiv reference
                plotDivs[plotId] = document.getElementById(plotId);

                // Add click event listener
                plotDivs[plotId].on('plotly_click', function(eventData) {
                    var point = eventData.points[0];
                    var nodeId = point.text;  // Get the node ID or any other info

                    if (nodeId) {
                        displayNodeDetails(nodeId);  // Call the function to display node details
                    } else {
                        console.log('No node ID found in click data');
                    }
                });
            });
        }

        renderPlot('dbscan-plot', './clustering_plot/dbscan_plot.json');
        renderPlot('kmeans-plot', './clustering_plot/kmeans_plot_k6.json');
        renderPlot('gmm-plot', './clustering_plot/gmm_plot_k5.json');
        renderPlot('hierarchical-plot', './clustering_plot/hierarchical_plot_k6.json');

        // Function to display node details
        function displayNodeDetails(nodeId) {
            var details = "Node ID: " + nodeId;
            document.getElementById('details').innerHTML = details;
        }

        // Scroll functionality for the carousel
        var carousel = document.getElementById('plots-carousel');

        document.getElementById('scroll-left').addEventListener('click', function() {
            carousel.scrollBy({ left: -carousel.offsetWidth, behavior: 'smooth' });
        });

        document.getElementById('scroll-right').addEventListener('click', function() {
            carousel.scrollBy({ left: carousel.offsetWidth, behavior: 'smooth' });
        });
    </script>
</body>
</html>
